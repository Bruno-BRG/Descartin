<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Graph Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="{{ url_for('static', filename='script.js') }}" defer></script>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <h1>Waste Management Dashboard</h1>
    <p>Filter and analyze different types of waste over time</p>
  </div>

  <!-- Main Content -->
  <div class="container">
    <!-- Filter Section -->
    <div class="filter-section">
      <h2>Filters</h2>
      <label for="residue-type">Residue Type</label>
      <select id="residue-type" onchange="filterImages()">
        <option value="all">All Types</option>
        {% set residue_types = [] %}
        {% for file in files %}
        {% if file.endswith('.png') %}
        {% set residue_type = file.split('_')[0] %}
        {% if residue_type not in residue_types %}
        <option value="{{ residue_type }}">{{ residue_type.capitalize() }}</option>
        {% set _ = residue_types.append(residue_type) %}
        {% endif %}
        {% endif %}
        {% endfor %}
      </select>

      <!-- Time Filter Section -->
      <label for="start-date">Start Date</label>
      <select id="start-date" onchange="filterImages()">
        {% for year in range(2014, 2025) %}
        <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
      </select>

      <label for="end-date">End Date</label>
      <select id="end-date" onchange="filterImages()">
        {% for year in range(2014, 2025) %}
        <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Images Section -->
    <div class="images-section">
      {% for file in files %}
      {% if file.endswith('.png') %}
      <img src="{{ url_for('static', filename='Graphs/' + file) }}" alt="{{ file.split('_')[0] }}" data-year="{{ file.split('_')[1].split('.')[0] }}" class="residue-image">
      {% endif %}
      {% endfor %}
    </div>
  </div>
</body>
</html>